# AutoChord

AutoChord是一个为给定旋律配和弦的项目。

### 计划表

初步计划为三部分：

- 基本复现论文中用BiLSTM学习的模型
- 转为类SAT问题，或者序贯决策模型
- 用BiLSTM学出的模型评价每一步可选和弦分数，用贪心法序列生成和弦（主要解决深度模型难以考虑非法进行）

#### 进程表

具体需要完成的任务：

- 数据预处理，所有的数据处理成标准numpy格式并存储，其中需要对和弦进行识别，并统一拉到C大小调上，写一个规则判断函数以判定是否违规（规则集应当可扩充）；另外定义一个序列罚函数，用于神经网络的训练，以及最后的贪心法
- 深度模型搭、搭建、模型保存标准化流程
- 待续



### 开发日志

##### 2021-11-07

-- dataloader

##### 2021-11-15

-- 数据读取、压缩；训练数据获取、随机mask生成、和弦种类扫描；

##### 2021-11-22

-- 回溯法；规则检查；

### 关于模型

- 对于深度学习模型和贪心法结合的模型，都**不**学习何时给出和弦，换句话说，对于一定的旋律，需要**指定配和弦的位置**，因此深度学习模型的预测是**每个音符都要和弦**；（2021-11-07）
- 目前统计来看按照12个旋律音位置统计和弦，将得到800多个不同的和弦，这个数量太多了，因此需要压缩，初步的想法是通过先验知识按照TSD功能将和弦分组；（2021-11-17）
- 关于深度模型，目前根据文献的观点，想法是用整个旋律序列和mask的和弦输入BiLSTM来预测缺失的部分，生成的时候依次生成；但是该做法难以整合到回溯法优化中，因此我们应该选择时序预测，也就是给出melody和已有的chord，然后是下一个melody，前面的melody和chord进入一个LSTM，然后结合新的melody，加上一个NN来给出下一个和弦的概率分布；（2021-11-23）
